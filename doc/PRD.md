# 지도 기반 SNS 웹/모바일 통합 플랫폼 — PRD (Product Requirements Document)

## 1. 프로젝트 개요

| 항목 | 내용 |
| ------ | ------ |
| **역할** | 시니어 풀스택 아키텍트 겸 개발자 관점의 설계·구현 |
| **서비스** | 사용자 **위치 중심**의 지도 UI + **게시글/이미지 SNS** 결합 서비스 |
| **목표** | 지도 기반 SNS 웹/모바일 통합 플랫폼 설계 및 구현 |

---

## 2. 기술 스택

### 2.1 Backend

| 구분 | 기술 |
| ------ | ------ |
| 프레임워크 | Spring Boot 4.0.2 |
| 언어 | Java 21 |
| 웹/검증/보안 | Spring MVC, Validation, Security |
| 데이터 | Spring Data JPA |
| API | REST API 기반 |
| 저장소 | Redis (세션 / 캐시 / 위치 정보), H2(개발), MySQL(운영) |

### 2.2 Frontend (Web)

| 구분 | 기술 |
| ------ | ------ |
| 템플릿 | Thymeleaf |
| UI | Bootstrap 또는 Tailwind |
| 지도 | Kakao Map / Naver Map / Google Map 중 **추상화 설계** (교체 가능) |

### 2.3 Mobile

| 구분 | 기술 |
|------|------|
| 프레임워크 | Flutter |
| 연동 | REST API, 지도 SDK |

---

## 3. 핵심 기능 요구사항

### 3.1 회원 시스템

| 기능 | 요구사항 |
| ------ | ---------- |
| 회원가입 | 이메일/비밀번호 기반 가입 |
| 로그인 | 세션 기반 인증, **Redis 연동** |
| 확장 | 향후 SNS 로그인(OAuth2) 확장을 고려한 구조 설계 |

### 3.2 게시판 기능

#### 3.2.1 접근 권한

| 사용자 | 가능 기능 |
|--------|-----------|
| **비로그인** | 게시글 목록 조회, 게시글 상세 조회 |
| **로그인** | 게시글 작성 / 수정 / 삭제 |

#### 3.2.2 게시글 유형 및 필드

| 유형 | 필드/특징 |
| ------ | ----------- |
| **일반 게시글** | 제목, 내용, 작성자, 작성 위치(위도·경도, 선택) |
| **이미지 게시글** | 이미지 업로드(Multipart), 이미지 + 텍스트 |
| **지도 연동** | 게시글과 지도 **Pin** 연동 가능 |

### 3.3 지도 기반 핵심 기능 (메인 화면)

지도는 서비스의 **중심 기능**이다.

| 기능 | 요구사항 |
| ------ | ---------- |
| **현재 사용자 위치** | GPS 위치 수집, 사용자 위치 중심 지도 로딩 |
| **반경 내 정보** | 반경 내 정보 실시간 표시 |
| **위치 탐색** | 지도 클릭 시 해당 위치 주변 정보 조회, 임의 위치 선택 |
| **Pin** | 사용자가 지도에 Pin 생성, Pin 정보(위치 + 설명) 저장, Pin ↔ 게시글/이미지 게시글 연결, Pin 클릭 시 관련 게시글 목록 표시 |
| **경로·거리** | 사용자 위치 → 목적지 거리 계산, 이동 방향/경로 시각화, 출발/도착 지점 설정 |
| **지도 ↔ 게시글** | 특정 위치에 대한 글 작성, 게시글 상세에서 지도 위치 표시, 지도 Pin → 게시글 상세 이동 |

### 3.4 마이페이지

- 내 게시글 목록
- 내 이미지 게시글 목록
- 내가 등록한 Pin 목록
- 개인정보 수정

### 3.5 About 페이지

- 서비스 소개
- 지도 기반 SNS 컨셉 설명
- 기술 스택 명시

### 3.6 관리자 기능 페이지

관리자 전용 화면이며, **관리자 역할(ROLE_ADMIN)** 인증·인가가 선행되어야 한다.

#### 3.6.1 전체 회원 관리

| 기능 | 요구사항 |
|------|----------|
| 전체 조회 | 회원 목록 조회 (페이징·검색 지원) |
| 회원 정보 추가 | 관리자에 의한 회원 등록 |
| 회원 정보 수정 | 프로필·역할 등 수정 |
| 회원 정보 삭제 | 회원 탈퇴/삭제 처리 |

#### 3.6.2 게시판 게시물 목록 관리

| 기능 | 요구사항 |
|------|----------|
| 조회 | 전체 게시글(일반·이미지) 목록 조회 (페이징·검색) |
| 수정 | 게시글 내용 수정 (관리자 권한) |
| 삭제 | 게시글 삭제 (관리자 권한) |
| 공지 등록 | 게시글을 공지로 지정/해제, 공지 상단 노출 |

#### 3.6.3 회원 가입 / 로그인 통계

- 회원 **가입** 통계 (기간별 가입자 수)
- 회원 **로그인** 통계 (기간별 로그인 수·활성 사용자)
- 차트/테이블 등 시각화 제공

#### 3.6.4 글 통계 (기간별)

| 단위 | 설명 |
|------|------|
| 하루 | 일(日) 단위 게시글 작성 수 |
| 한 주 | 주(週) 단위 게시글 작성 수 |
| 한 달 | 월(月) 단위 게시글 작성 수 |
| 분기 | 분기(Quarter) 단위 게시글 작성 수 |
| 년도 | 연(年) 단위 게시글 작성 수 |

- 기간 선택·필터 및 집계 결과 조회
- (선택) 차트로 추이 시각화

---

## 4. 아키텍처 설계 요구사항

### 4.1 Backend 설계

#### 4.1.1 계층 분리

```text
Controller → Service → Domain(Entity) / Repository
```

- **Controller**: REST API + Thymeleaf 컨트롤러 **분리**
- **Service**: 비즈니스 로직
- **Domain(Entity)**: 엔티티
- **Repository**: 데이터 접근
- **DTO** 기반 통신, **Validation** 적용, **Exception 공통 처리**

#### 4.1.2 데이터 설계 (핵심 도메인)

| 도메인 | 설명 |
|--------|------|
| **User** | 회원 (역할: 일반/관리자 등 — 관리자 기능 인가에 사용) |
| **Post** | 일반 게시글 |
| **ImagePost** | 이미지 게시글 |
| **Pin** | 지도 Pin |
| **Location** | 위도/경도 Value Object |
| **Post ↔ Pin** | 연관관계 설계 필수 |

#### 4.1.3 Redis 활용

| 용도 | 설명 |
|------|------|
| 로그인 세션 | 세션 저장소 |
| 위치 기반 데이터 캐싱 | 반경 조회 등 캐싱 |
| 실시간 지도 정보 | 응답 속도 개선 |

### 4.2 운영 환경 기준

- **DB**: MySQL (운영), H2 (개발)
- **캐시/세션**: Redis
- 설계는 **운영 환경(MySQL, Redis)** 기준으로 수행

---

## 5. 확장 고려 사항

| 영역 | 확장 항목 |
|------|-----------|
| 인증 | OAuth2 (Google / Kakao / Naver) |
| 실시간 | WebSocket 기반 실시간 위치 공유 |
| engagement | 알림 시스템, 게시글 좋아요 / 댓글 |
| 지도 | 지도 클러스터링 |

---

## 6. 결과물 요청 (산출물)

다음 산출물을 **단계별**로 제공한다.

| # | 산출물 | 설명 |
|---|--------|------|
| 1 | **전체 시스템 아키텍처 다이어그램** | 웹/모바일·Backend·DB·Redis·지도 API 관계도 |
| 2 | **ERD 설계** | User, Post, ImagePost, Pin, Location 및 관계 |
| 3 | **REST API 명세** | 엔드포인트·Method·Request/Response·인증 |
| 4 | **Spring Boot 패키지 구조** | 계층별 패키지·역할 |
| 5 | **주요 엔티티 코드** | Entity·Value Object 예시 |
| 6 | **지도 + 게시글 연동 예제** | Pin ↔ Post 연동 흐름·코드 예시 |
| 7 | **Flutter 연동 API 구조 예시** | REST 호출·지도 SDK 연동 구조 |
| 8 | **관리자 기능** | 회원 관리·게시물 관리·가입/로그인/글 통계 API·화면 설계 반영 |

---

## 7. 개발 원칙

| 원칙 | 내용 |
|------|------|
| **실무 기준** | 프로덕션 수준 코드·설계 |
| **확장성 우선** | OAuth2·WebSocket·알림 등 확장을 고려한 구조 |
| **테스트 가능** | 단위/통합 테스트가 가능한 구조 |
| **운영 기준** | MySQL, Redis 기준 설계·설정 |

---

## 8. 참조 문서

- **보안·기술 규칙**: `doc/RULE.md`
- **인증 상세**: `doc/SECURITY_AUTH.md` (존재 시)

---

> **문서 버전**: 1.0.0
> **최종 업데이트**: 2026-02-04
